СОЗВОНИТЬСЯ С ПАК НАСЧЕТ СПЕКИ - она должна в соответствии с описанием ниже добавить "стрелочки" - там не хватает доп.ноды "TCS" - SAI должен делать дозапрос параметров у TCS и соответственно анализировать те флаги
https://gitlab.trueconf.com/products/speech2text/specs/-/blob/main/v1.0.1-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0/SAI/2.%D0%9B%D0%9A/2.7.%D0%BF%D1%80%D0%BE%D0%B2%D0%B5%D1%80%D0%BA%D0%B0-%D0%BF%D1%80%D0%B0%D0%B2.md?ref_type=heads&plain=0

ПЕРВАЯ ЗАДАЧА (СОСТОИТ ИЗ ДВУХ)
1. Доработки полномочий обычных пользователей, которые учёткой TCS пытаются получить доступ к каким-то объектам на SAI
	1. Поддержать на стороне SAI (который управляет настройками прав доступа к конкретному объекту, который он хранит) добавление групп к ролям
		1. У каждой стенограммы есть список ролей, у которой есть права и состав участников (id-s). Вот нужно добавить сюда группы, чтобы права можно было дать не только по id, но и по наличию пользователя в группе, входящей в такую-то роль
		2. Сейчас происходит так: в запросе приходит объект, мы с ним идём в БД, ищем его по id из запроса, смотрим, какая у него там указана роль (если вообще указана), и применяем ему права согласно этой роли
		3. А нужно сделать так: когда мы после авторизации запрашиваем ещё текущие группы пользователей в TCS, надо сделать доп. проверку - прописан ли пользователь явно по id, или есть какое-то пересечение по группам. В настройках стенограммы указано, что такие-то группы обладают такой-то ролью
	2. Доп. настройки на стороне TCS, которые TCS вычисляет отдельно в контексте каждого пользователя и формирует два флага:
		1. является ли этот пользователь суперпользователем SAI
			1. Суперпользователь SAI - значит он находится неявно в группе "модераторы" каждой транскрибации, даже если он там не прописан явно (глобальная настройка такая)
		2. разрешено ли пользователю вообще работать с SAI
		

Комбинации этих двух флагов с TCS:

| 1.2 | transcription_enable | transcription_moderator | Права                                                                                                                                                |
| --- | -------------------- | ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
|     | false                | false                   | Запрет доступа независимо от текущих настроек прав в самом объекте стенограммы на стороне SAI                                                        |
|     | true                 | false                   | skip: всё как есть сейчас                                                                                                                            |
|     | false                | true                    | Интерпретируем как запрет, потому что это ошибка (такой комбинации приходить не должно, "transcription_moderator" зависит от "transcription_enable") |
|     | true                 | true                    | skip-аем проверку прав по конкретному ID и считаем, что этому пользователю можно всё (т.е. повышаем привилегии до максимального)                     |

ВТОРАЯ ЗАДАЧА
Изменение механизма предоставления прав доступа админам TCS, которые пытаются получить доступ к каким-то объектам на SAI


-----------------------------------------------------------------------------
1. Есть end-поинты в API SAI, которые отвечают на запросы пользователя по выдаче ему данных, и в них есть функция (или блок), который вычисляет, какое решение надо принять. Вот надо эту функцию найти и добавить перед той логикой, которая сейчас есть, свою, которая будет анализировать те 2 флага и принимать решение "запрет", "skip" или обычная проверка
2. Поддержать возможность сохранять права доступа каждого объекта не только по ID пользователя, но и по ID группы, в которой есть этот пользователь
3. Третья задача решается на стороне TCS по-идее. Андрей вспомнит, как админ TCS авторизует свои запросы объектам SAI, т.к. (как он говорит) админ TCS не может авторизоваться в ЛК SAI, в него может зайти только пользователь TCS. У SAI нет своих пользователей и своей страницы авторизации, у него есть только кэш пользователей, которых он запрашивает через oauth в TCS (как авторизация через соцсети). Тут разные соцсети - это разные TCS-ы. Пользователь выбирает свой TCS, ему открывается pop-ап-окно конкретно этого TCS, он вводит свои credentials
   Вот так реализована авторизация пользователем на SAI, авторизации админом на SAI вообще нет (она реализована вроде через JWT-токен)