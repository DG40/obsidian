---
репозиторий: https://gitlab.trueconf.com/libs/neuro/speec2text/asr-project
ANN API: https://gitlab.trueconf.com/products/speech2text/specs/-/blob/main/v1.0.1-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE-%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0/SAI/3.ANN/3.1.API.md?ref_type=heads
контакты: Денис Индейкин - разработчик ANN-модуля. Можно обращаться по вопросам взаимодействия Web API и ANN, по работе нейросетей, по работе с контейнерами на стендах
---
## Разделы
1. [[#Основные подходы]]
2. [[#Зоны ответственности]]
3. [[#Используемые инструменты]]
## Основные подходы
В проекте SAI работу по распознаванию текста из аудиофайлов и конспектированию выполняет ANN-модуль (ANN - artifitial neural network). Для разработчика Web API он является чёрным ящиком, общение с которым осуществляется через WebSocket.

При установлении соединения Web API выступает в роли сервера, ANN-модуль - клиента.

Сам ANN-модуль представляет из себя набор docker-контейнеров, связанных внутренней сетью: 
- **supervisor** - контейнер, выполняющий роль гейтвея для контейнеров с нейросетями, общение Web API происходит через него. Также занимается планированием работы нейросетей
- **transcription** - контейнер с моделью для распознавания текста из входящих аудиофайлов
- **summary** - контейнер с моделью для создания конспектов на основе переданного текста и промпта

Рабочие единицы нейросетей называются воркерами. Они явно не сохраняют состояние для его восстановаления в случае отказов, поэтому был реализован периодический опрос Web API на наличие "недораспознанных транскрибаций". Если таковые имеются, Web API повторно отправляет запросы на распознавание. Это касается как транскрибации, так и создания конспектов
## Зоны ответственности
В зону ответственности разработчика Web API входит проектирование/согласование API ANN, решение сетевых проблем при общении с ANN-модулем. Иногда может потребоваться посмотреть в логи docker-контейнеров, остановить/перезапустить их

Основной задачей при работе с ANN-модулем для разработчика Web API является обработка сообщений WebSocket-соединения и предоставления проксирующего API клиентам

## Используемые инструменты
Для работы с WebSocket-соединениями используется библиотека [gorilla/websocket](https://github.com/gorilla/websocket)
На стороне ANN-модуля находятся агенты нейросетей, написанные на Python